# Giscus 评论组件

## 概述

`GiscusComments` 组件是一个基于 GitHub Discussions 的评论系统，使用 Giscus 服务为博客文章提供评论功能。该组件支持多语言、主题切换和响应式设计。

## 功能特性

- 🚀 **GitHub Discussions 集成**: 基于 GitHub Discussions 的评论系统
- 🌍 **多语言支持**: 支持中文、英文、日文三种语言
- 🎨 **主题适配**: 自动跟随网站主题切换（明亮/暗黑模式）
- 📱 **响应式设计**: 适配移动端和桌面端
- 🔄 **实时更新**: 支持主题和语言动态切换
- 📊 **严格匹配**: 不同语言版本的评论相互隔离

## 使用方法

### 1. 自动集成

评论组件已经自动集成到所有文章页面中，无需手动添加。它会在以下位置显示：

- 所有文档页面（`.md` 文件）
- 文章详情页面

### 2. 手动使用

如果需要手动在特定页面使用评论组件，可以在 Markdown 文件中使用：

```vue
<GiscusComments />
```

## 配置说明

组件使用以下 GitHub 配置：

- **仓库**: `Virginia-Zhang/vlog-virginia-blog`
- **分类**: Announcements
- **映射方式**: pathname（基于页面路径）
- **严格匹配**: 启用（隔离不同语言版本）
- **表情反应**: 启用
- **输入位置**: 顶部

## 多语言支持

组件支持三种语言，会自动根据 VitePress 的语言设置切换：

### 语言映射

| VitePress 语言 | Giscus 语言 |
| -------------- | ----------- |
| `zh-CN`, `zh`  | `zh-CN`     |
| `ja-JP`, `ja`  | `ja`        |
| `en-US`, `en`  | `en`        |
| 其他           | `en` (默认) |

### 示例

- 中文页面：显示中文界面
- 英文页面：显示英文界面
- 日文页面：显示日文界面

## 主题适配

组件会自动跟随网站主题切换：

- **明亮模式**: 使用 `light` 主题
- **暗黑模式**: 使用 `dark` 主题

主题切换时会自动更新 Giscus 界面，无需刷新页面。

## 响应式设计

- **桌面端**: 完整显示评论区域
- **移动端**: 自动调整布局和间距

## 加载状态

组件在加载时会显示友好的提示信息：

```
评论加载中... / Loading comments... / コメントを読み込み中...
```

## 技术实现

- 使用 Vue 3 Composition API
- 基于 VitePress 的路由和主题系统
- 动态脚本加载和主题更新
- 错误处理和重试机制

## 故障排除

### 常见问题

1. **评论不显示**

   - 检查网络连接
   - 确认 GitHub 仓库配置正确
   - 查看浏览器控制台错误信息

2. **主题切换不生效**

   - 组件会自动重试主题更新
   - 如果失败会自动重新加载

3. **语言切换问题**
   - 确保 VitePress 语言配置正确
   - 检查语言映射配置

### 调试信息

组件会在控制台输出调试信息：

- 主题更新状态
- 语言切换信息
- 错误处理日志

## 样式定制

评论组件使用 scoped 样式，可以通过以下方式定制：

```css
/* 自定义评论区域样式 */
.giscus-wrapper {
  margin-top: 3rem;
  padding-top: 2rem;
  border-top: 2px solid var(--vp-c-divider);
}

/* 自定义加载提示样式 */
.giscus:empty::before {
  color: var(--vp-c-text-2);
  font-style: italic;
}
```

## 注意事项

- 需要 GitHub 仓库启用 Discussions 功能
- 需要配置正确的仓库和分类 ID
- 建议在生产环境中使用 HTTPS
- 组件会自动处理跨域和安全问题
